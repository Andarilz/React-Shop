import * as R from 'ramda'

import {
  FETCH_PHONES_SUCCESS,
  LOAD_MORE_PHONES_SUCCESS,
  FETCH_PHONE_BY_ID_SUCCESS
} from 'actionTypes'

const initialState = {}

// получаем все телефоны, которые мы зафечили

export default (state= initialState, {type, payload}) => {

  switch (type) {

    case FETCH_PHONES_SUCCESS:


    const newValues = R.indexBy(R.prop('id'), payload) // меняем значения под айдишник как ключ

      //const list = [{id: 'xyz', title: 'A'}, {id: 'abc', title: 'B'}];
      // R.indexBy(R.prop('id'), list);
      // //=> {abc: {id: 'abc', title: 'B'}, xyz: {id: 'xyz', title: 'A'}}

      return R.mergeRight(state, newValues) //вставляем в стейт изменения

      // return state

    case LOAD_MORE_PHONES_SUCCESS:

      const moreValues = R.indexBy(R.prop('id'), payload) // меняем значения под айдишник как ключ

      return R.mergeRight(state, moreValues) //вставляем в стейт изменения

    case FETCH_PHONE_BY_ID_SUCCESS:

      return R.assoc(payload.id, payload, state)

      // возвращаем полученный элемент внутри объекта с ключом - айдишником элемента

   default:
    return state
  }

}